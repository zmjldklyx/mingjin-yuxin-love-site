<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é“­æ´¥ â™¥ ç‰è–ªçš„å°çª</title>

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink-1:#ffe8ec; --pink-2:#ffc9d6; --accent:#d6336c; --muted:#6b6b6b;
      --card-bg:rgba(255,255,255,0.92); --shadow:0 8px 20px rgba(214,51,108,0.08);
      --radius:14px; --max-width:980px; --gap:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Noto Sans SC', system-ui, -apple-system,"Segoe UI",Roboto,Arial;
      background: linear-gradient(135deg,var(--pink-1),var(--pink-2));
      color:#333; display:flex; justify-content:center; padding:20px;
    }

    .site{ width:100%; max-width:var(--max-width); margin:0 auto; }

    header.top{ display:flex; gap:16px; align-items:center; margin-bottom:16px; padding:14px; border-radius:18px;
      background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.12));
      box-shadow: var(--shadow); backdrop-filter: blur(6px);
    }
    .brand{ display:flex; gap:12px; align-items:center; flex:1; min-width:0; }
    .avatar{ width:68px; height:68px; border-radius:50%; overflow:hidden; flex-shrink:0; border:3px solid rgba(255,255,255,0.8); box-shadow:0 6px 18px rgba(214,51,108,0.12); }
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .title{ display:flex; flex-direction:column; min-width:0; }
    .title h1{ margin:0; font-family:'Great Vibes', cursive; font-size:30px; color:var(--accent); line-height:1 }
    .title p{ margin:4px 0 0; font-size:13px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .controls{ text-align:right; min-width:160px; display:flex; flex-direction:column; align-items:flex-end; gap:8px; }
    .enter-btn{ background:var(--accent); color:#fff; border:none; padding:8px 14px; border-radius:10px; cursor:pointer; font-weight:600; box-shadow:0 6px 16px rgba(214,51,108,0.12); }
    .quote-box{ text-align:center; margin-bottom:14px; font-style:italic; color:#444; background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.35)); padding:12px 14px; border-radius:12px; box-shadow:var(--shadow); }
    .grid{ display:grid; grid-template-columns:1fr 380px; gap:var(--gap); align-items:start; }
    @media (max-width:980px){ .grid{ grid-template-columns:1fr } }
    .left-col{ display:flex; flex-direction:column; gap:12px; }
    .card{ background:var(--card-bg); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow); transition:transform .18s ease, box-shadow .18s ease; }
    .card:hover{ transform:translateY(-6px); box-shadow:0 18px 40px rgba(0,0,0,0.08) }
    .card h2{ margin:0 0 8px 0; color:var(--accent) }
    .muted{ color:var(--muted); font-size:13px }
    .btn{ background:var(--accent); color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-size:14px; }
    .btn.ghost{ background:transparent; color:var(--accent); border:1px solid rgba(214,51,108,0.12) }
    .gallery{ display:grid; grid-template-columns: repeat(auto-fill, minmax(140px,1fr)); gap:10px; margin-top:10px; }
    .photo-card{ border-radius:12px; overflow:hidden; background:#fff; display:flex; flex-direction:column; justify-content:flex-start; align-items:center; padding:8px; }
    .photo-card img{ width:100%; height:120px; object-fit:cover; border-radius:8px; cursor:zoom-in; }
    .photo-card .caption{ font-size:13px; color:#666; padding:8px 6px; text-align:center; min-height:44px; }
    .right-col{ display:flex; flex-direction:column; gap:12px; }
    .sticky{ position:sticky; top:18px; }
    #progressBar{ height:12px; background: linear-gradient(90deg,#ffe6ef,#ffd8e6); border-radius:8px; overflow:hidden; margin:10px 0; }
    #progressInner{ height:100%; background: linear-gradient(90deg,#ff8bb0,#d6336c); width:0%; transition:width .6s ease; }
    .love-list ul{ margin:10px 0 0; padding:0; display:flex; flex-direction:column; gap:10px; }
    .love-item{ display:flex; gap:8px; align-items:center; justify-content:space-between; padding:8px; border-radius:10px; background:rgba(255,255,255,0.88) }
    .item-left{ display:flex; gap:8px; align-items:center; flex:1 }
    .item-left input[type="checkbox"]{ transform:scale(1.12) }
    .item-left .text{ font-size:15px }
    .small{ font-size:12px; color:#777 }
    #photoManager{ display:none; position:fixed; inset:0; z-index:9998; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; padding:20px; }
    #photoManager .panel{ width:100%; max-width:980px; background:#fff; border-radius:12px; padding:16px; box-shadow:0 20px 60px rgba(0,0,0,0.3); max-height:90vh; overflow:auto; }
    .manager-top{ display:flex; gap:10px; align-items:center; margin-bottom:8px; }
    .manager-top input[type="file"]{ flex:1 }
    #lightbox{ display:none; position:fixed; inset:0; background: rgba(0,0,0,0.85); z-index:10000; align-items:center; justify-content:center; padding:20px; }
    #lightbox .inner{ max-width:960px; width:100%; }
    #lightbox img{ width:100%; height:auto; border-radius:12px; max-height:80vh; object-fit:contain; }
    #lightbox .caption{ margin-top:8px; color:#fff; text-align:center }
    @media (max-width:600px){
      body{ padding:12px; }
      header.top{ flex-direction:column; align-items:flex-start; gap:10px; padding:12px; border-radius:12px; }
      .avatar{ width:56px; height:56px; }
      .title h1{ font-size:26px; }
      .controls{ width:100%; align-items:flex-start; }
      .quote-box{ font-size:14px; padding:10px; }
      .card{ padding:12px; border-radius:12px; }
      .grid{ gap:12px; }
      .photo-card img{ height:110px; }
      .gallery{ grid-template-columns: repeat(auto-fill, minmax(120px,1fr)); gap:8px; }
      .btn{ padding:10px 12px; font-size:15px; border-radius:10px; }
      input[type="text"], input[type="file"]{ padding:10px; font-size:15px; }
      #photoManager .panel{ width:100%; height:100vh; max-width:100%; border-radius:10px; padding:14px; max-height:none; }
      #lightbox .inner{ height:100vh; display:flex; flex-direction:column; justify-content:center; }
      #lightbox img{ max-height:70vh; }
      .photo-card .caption{ min-height:52px; font-size:14px; }
      .title p{ font-size:12px; }
      .enter-btn{ padding:10px 16px; }
      .right-col .card.sticky{ position:static; }
    }
    footer{ margin-top:12px; text-align:center; color:var(--muted); font-size:13px }
    .hidden{ display:none !important; }
  </style>
</head>
<body>
  <div class="site" id="mainSite">
    <header class="top">
      <div class="brand">
        <div class="avatar">
          <img src="photo1.jpg" alt="å¤´åƒï¼ˆå¯æ›¿æ¢ï¼‰" onerror="this.src='https://via.placeholder.com/150?text=%E2%9D%A4'">
        </div>
        <div class="title">
          <h1>é“­æ´¥ â™¥ ç‰è–ª</h1>
          <p>æˆ‘ä»¬çš„å°çª Â· è®°å½•æ¯ä¸€æ¬¡ç¬‘ä¸æ‹¥æŠ±</p>
        </div>
      </div>
      <div class="controls">
        <div style="margin-bottom:6px;color:var(--muted);font-size:13px">å½“å‰ï¼šæ¸©æŸ”æ¨¡å¼</div>
        <button class="enter-btn" onclick="scrollToTop()">å›åˆ°é¡¶éƒ¨</button>
      </div>
    </header>

    <div class="quote-box" id="dailyQuote">â€œä½ æ˜¯æˆ‘å¿ƒä¸­æœ€æŸ”è½¯çš„å…‰ã€‚â€</div>

    <div class="grid">
      <div class="left-col">
        <div class="card">
          <h2>æˆ‘ä»¬çš„çºªå¿µæ—¥</h2>
          <p class="muted">ä» 2025-03-15 å¼€å§‹ï¼Œæˆ‘ä»¬å·²ç»ä¸€èµ·èµ°è¿‡ <strong id="daysTogether">...</strong> å¤©ã€‚</p>
        </div>

        <div class="card">
          <h2>ç…§ç‰‡å›å¿†</h2>
          <p class="muted">ç…§ç‰‡ä¸åœ¨ä¸»é¡µç›´æ¥æ˜¾ç¤ºï¼Œç‚¹å‡»ä¸‹é¢æŒ‰é’®æ‰“å¼€ç…§ç‰‡ç®¡ç†çª—å£æ¥æŸ¥çœ‹ã€æ·»åŠ æˆ–åˆ é™¤ç…§ç‰‡ã€‚</p>
          <div style="margin-top:10px;">
            <button class="btn" onclick="openPhotoManager()">æŸ¥çœ‹ç…§ç‰‡å›å¿†</button>
          </div>
        </div>

        <div class="card">
          <h2>ç•™è¨€å¢™ï¼ˆé¢„è§ˆï¼‰</h2>
          <p class="muted">ç‚¹å‡»â€œè¿›å…¥ç•™è¨€å¢™â€å†™ä¸‹ä¸æƒ³å¿˜è®°çš„è¯ã€‚</p>
          <a class="btn" href="words.html">è¿›å…¥ç•™è¨€å¢™</a>
        </div>
      </div>

      <aside class="right-col">
        <div class="card sticky">
          <h2>æ‹çˆ±æ¸…å•</h2>
          <div id="progressBar"><div id="progressInner"></div></div>
          <div style="display:flex;gap:8px">
            <input id="newItem" type="text" placeholder="è¾“å…¥æ–°çš„æ‹çˆ±ç›®æ ‡..." />
            <button class="btn" onclick="addItem()">æ·»åŠ </button>
          </div>
          <div class="love-list">
            <ul id="loveList"></ul>
          </div>
        </div>

        <div class="card sticky">
          <h2>å°æç¤º</h2>
          <p class="small muted">ç…§ç‰‡ç®¡ç†çª—å£æ”¯æŒä¸Šä¼ ã€ä» URL æ·»åŠ ã€æè¿°ç¼–è¾‘ã€åˆ é™¤ä¸ç¯ç®±é¢„è§ˆã€‚</p>
        </div>
      </aside>
    </div>

    <footer>Â© é“­æ´¥ & ç‰è–ª Â· å°çª</footer>
  </div>

  <!-- Photo Manager Modal -->
  <div id="photoManager" class="hidden" role="dialog" aria-modal="true">
    <div class="panel">
      <div class="manager-top">
        <input id="pmUpload" type="file" accept="image/*" />
        <div class="manager-actions">
          <button id="pmAddUrl" class="btn ghost" title="ä» URL æ·»åŠ ">ä» URL æ·»åŠ </button>
          <button id="pmClose" class="btn ghost">å…³é—­</button>
        </div>
      </div>

      <div class="gallery" id="pmGallery" aria-live="polite"></div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="hidden" onclick="closeLightbox(event)" aria-hidden="true">
    <div class="inner" onclick="event.stopPropagation()">
      <img id="lightboxImg" src="" alt="é¢„è§ˆ" />
      <div class="caption" id="lightboxCaption"></div>
      <div style="text-align:center;margin-top:10px">
        <button class="btn" onclick="copyCaption()" style="margin-right:8px">å¤åˆ¶æè¿° / æƒ…è¯</button>
        <button class="btn ghost" onclick="closeLightbox(event)">å…³é—­</button>
      </div>
    </div>
  </div>

  <script>
    /* çºªå¿µæ—¥ä¸æ¯æ—¥æƒ…è¯ */
    const startDate = new Date("2025-03-15");
    function updateDays(){ const today = new Date(); const diff = Math.floor((today - startDate)/(1000*60*60*24)); document.getElementById('daysTogether').textContent = diff; }
    updateDays();
    const quotes = ["ä½ çš„ç¬‘å®¹ï¼Œæ˜¯æˆ‘æœ€çˆ±çš„é£æ™¯ã€‚","å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€å¤©ï¼Œéƒ½æ˜¯èŠ‚æ—¥ã€‚","çˆ±ä½ ï¼Œæ˜¯æˆ‘æœ€åšå®šçš„é€‰æ‹©ã€‚","ä¸–ç•Œå¾ˆå¤§ï¼Œä½†æˆ‘åªæƒ³å’Œä½ ä¸€èµ·èµ°ã€‚","ä½ æ˜¯æˆ‘å¿ƒä¸­æœ€æŸ”è½¯çš„å…‰ã€‚"];
    document.getElementById('dailyQuote').textContent = `â€œ${quotes[Math.floor(Math.random()*quotes.length)]}â€`;

    /* ç…§ç‰‡ç®¡ç†ï¼ˆä»…æ˜¾ç¤ºç”¨æˆ·ä¸Šä¼ çš„ç…§ç‰‡ï¼‰ */
    const pm = document.getElementById('photoManager');
    const pmGallery = document.getElementById('pmGallery');
    let storedPhotos = JSON.parse(localStorage.getItem('photos')) || [];
    const photoQuotes = ["ä½ çš„ç¬‘å®¹ï¼Œè®©æ˜¥å¤©æå‰åˆ°æ¥ã€‚","å’Œä½ ç‰µæ‰‹ï¼Œèµ°è¿‡æ¯ä¸€æ¡è¡—ã€‚","æ„¿æ—¶é—´æ¸©æŸ”ä»¥å¾…æˆ‘ä»¬çš„å°æ—¥å­ã€‚","ä½ çš„åå­—ï¼Œæ˜¯æˆ‘æœ€æ¸©æŸ”çš„å¿µæƒ³ã€‚","æ¯å¤©éƒ½æƒ³æŠŠä¸–ç•Œçš„å¥½ç»™ä½ çœ‹ã€‚"];

    function openPhotoManager(){ pm.classList.remove('hidden'); pm.style.display='flex'; document.body.style.overflow='hidden'; renderPmGallery(); }
    function closePhotoManager(){ pm.classList.add('hidden'); pm.style.display='none'; document.body.style.overflow=''; }
    function renderPmGallery(){
      pmGallery.innerHTML=''; 
      storedPhotos.forEach((obj, idx)=>{
        const card = document.createElement('div'); card.className='photo-card';
        const img = document.createElement('img'); img.src = obj.src; img.onclick = ()=> openLightbox(obj.src, obj.caption || photoQuotes[idx % photoQuotes.length]);
        card.appendChild(img);
        const cap = document.createElement('div'); cap.className='caption'; cap.textContent = obj.caption || photoQuotes[idx % photoQuotes.length]; cap.onclick = ()=> editPmCaption(idx);
        card.appendChild(cap);
        const actions = document.createElement('div'); actions.style.marginTop='6px';
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='åˆ é™¤';
        del.onclick = ()=> { if(confirm('ç¡®è®¤åˆ é™¤è¿™å¼ ä¸Šä¼ çš„ç…§ç‰‡å—ï¼Ÿ')){ storedPhotos.splice(idx,1); localStorage.setItem('photos', JSON.stringify(storedPhotos)); renderPmGallery(); } };
        actions.appendChild(del); card.appendChild(actions);
        pmGallery.appendChild(card);
      });
    }
    document.getElementById('pmUpload').addEventListener('change', (e)=> {
      const file = e.target.files && e.target.files[0]; if(!file) return;
      const reader = new FileReader(); reader.onload = ()=> { storedPhotos.push({src:reader.result, caption:''}); localStorage.setItem('photos', JSON.stringify(storedPhotos)); renderPmGallery(); };
      reader.readAsDataURL(file); e.target.value='';
    });
    document.getElementById('pmAddUrl').addEventListener('click', ()=>{ const url = prompt('è¾“å…¥å›¾ç‰‡ URLï¼š'); if(url){ storedPhotos.push({src:url.trim(), caption:''}); localStorage.setItem('photos', JSON.stringify(storedPhotos)); renderPmGallery(); } });

    /* ç¯ç®±ä¸å¤åˆ¶æè¿° */
    function openLightbox(src, caption){ document.getElementById('lightboxImg').src = src; document.getElementById('lightboxCaption').textContent = caption || ''; const lb = document.getElementById('lightbox'); lb.classList.remove('hidden'); lb.style.display='flex'; document.body.style.overflow='hidden'; }
    function closeLightbox(e){ const lb = document.getElementById('lightbox'); if(!e || e.target === lb || (e.target && e.target.classList.contains('ghost'))){ lb.style.display='none'; lb.classList.add('hidden'); document.body.style.overflow=''; } }
    function copyCaption(){ const text = document.getElementById('lightboxCaption').textContent || ''; if(!text) return alert('æ²¡æœ‰æè¿°å¯å¤åˆ¶'); navigator.clipboard.writeText(text).then(()=> alert('æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')); }
    function editPmCaption(idx){ const current = storedPhotos[idx] && storedPhotos[idx].caption ? storedPhotos[idx].caption : ''; const text = prompt('ç¼–è¾‘æè¿°ï¼š', current || photoQuotes[idx % photoQuotes.length]); if(text !== null){ storedPhotos[idx].caption = text.trim(); localStorage.setItem('photos', JSON.stringify(storedPhotos)); renderPmGallery(); } }

    /* æ‹çˆ±æ¸…å• */
    const loveListEl = document.getElementById('loveList');
    const defaultItems = [
      {text:"ä¸€èµ·å»çœ‹æµ· ğŸŒŠ", done:false, date:null},
      {text:"ä¸€èµ·åšé¥­ ğŸ³", done:false, date:null},
      {text:"ä¸€èµ·æ‹ä¸€å¼ å‚»å‚»çš„åˆç…§ ğŸ“¸", done:false, date:null},
      {text:"ä¸€èµ·å†™ä¸€å°æƒ…ä¹¦ ğŸ’Œ", done:false, date:null},
      {text:"ä¸€èµ·çœ‹ä¸€åœºæ—¥è½ ğŸŒ…", done:false, date:null}
    ];
    const loaded = JSON.parse(localStorage.getItem('loveItems'));
    let loveItems = (Array.isArray(loaded) && loaded.length>0) ? loaded : defaultItems.slice();
    function saveLove(){ localStorage.setItem('loveItems', JSON.stringify(loveItems)); updateProgress(); }
    function updateProgress(){ const done = loveItems.filter(i=>i.done).length; const total = Math.max(1, loveItems.length); const pct = Math.round((done/total)*100); document.getElementById('progressInner').style.width = pct + '%'; document.getElementById('progressInner').title = `å·²å®Œæˆ ${done}/${total} é¡¹`; }
    function renderList(){ loveListEl.innerHTML=''; loveItems.forEach((it, idx)=>{ const li = document.createElement('li'); li.className='love-item'; const left = document.createElement('div'); left.className='item-left'; const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!it.done; cb.onchange = ()=>{ it.done = cb.checked; it.date = it.done ? new Date().toLocaleDateString() : null; saveLove(); renderList(); }; left.appendChild(cb); const span = document.createElement('div'); span.className='text'; span.textContent = it.text; if(it.done) span.style.textDecoration = 'line-through'; left.appendChild(span); li.appendChild(left); const right = document.createElement('div'); right.style.display='flex'; right.style.gap='8px'; right.style.alignItems='center'; if(it.date){ const d = document.createElement('div'); d.className='small'; d.textContent = it.date; right.appendChild(d); } const edit = document.createElement('button'); edit.className='btn ghost'; edit.textContent='ç¼–è¾‘'; edit.onclick = ()=>{ const v = prompt('ç¼–è¾‘æ¸…å•é¡¹ï¼š', it.text); if(v !== null){ it.text = v.trim() || it.text; saveLove(); renderList(); } }; const del = document.createElement('button'); del.className='btn ghost'; del.textContent='åˆ é™¤'; del.onclick = ()=>{ if(confirm('ç¡®è®¤åˆ é™¤è¿™é¡¹å—ï¼Ÿ')){ loveItems.splice(idx,1); saveLove(); renderList(); } }; right.appendChild(edit); right.appendChild(del); li.appendChild(right); loveListEl.appendChild(li); }); updateProgress(); }
    function addItem(){ const input = document.getElementById('newItem'); const v = input.value.trim(); if(!v) return; loveItems.push({text:v,done:false,date:null}); input.value=''; saveLove(); renderList(); }
    renderList();

    // ä¾¿æ·ï¼šEsc å…³é—­æ¨¡æ€
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape'){ const pmEl = document.getElementById('photoManager'); const lb = document.getElementById('lightbox'); if(pmEl && !pmEl.classList.contains('hidden')){ pmEl.classList.add('hidden'); pmEl.style.display='none'; document.body.style.overflow=''; } if(lb && !lb.classList.contains('hidden')){ lb.classList.add('hidden'); lb.style.display='none'; document.body.style.overflow=''; } } });
  </script>
</body>
</html>
