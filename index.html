<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>铭津 ♥ 玉薪的小窝</title>

  <!-- 字体（可改为本地字体或替换路径） -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink-1: #ffe8ec;
      --pink-2: #ffc9d6;
      --accent: #d6336c;
      --muted: #6b6b6b;
      --card-bg: rgba(255,255,255,0.9);
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 8px 20px rgba(214,51,108,0.08);
      --radius: 14px;
      --max-width: 980px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Noto Sans SC', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,var(--pink-1),var(--pink-2));
      -webkit-font-smoothing:antialiased;
      color:#333;
      display:flex;
      justify-content:center;
      padding:28px;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
      margin:0 auto;
    }

    header.top {
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:18px;
      padding:18px;
      border-radius:20px;
      background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.12));
      box-shadow: var(--shadow);
      backdrop-filter: blur(6px);
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
      flex:1;
    }
    .avatar {
      width:74px; height:74px; border-radius:50%;
      overflow:hidden; flex-shrink:0;
      border: 3px solid rgba(255,255,255,0.8);
      box-shadow: 0 6px 18px rgba(214,51,108,0.12);
    }
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .title {
      display:flex; flex-direction:column;
    }
    .title h1{margin:0;font-family:'Great Vibes', cursive; font-size:34px; color:var(--accent); line-height:1}
    .title p{margin:4px 0 0;font-size:13px;color:var(--muted)}

    .controls { text-align:right; min-width:160px; }
    .enter-btn { background:var(--accent); color:#fff; border:none; padding:8px 14px; border-radius:10px; cursor:pointer; font-weight:600; box-shadow: 0 6px 16px rgba(214,51,108,0.12); }
    .enter-btn.secondary { background:transparent; color:var(--accent); border:1px solid rgba(214,51,108,0.12); }

    .quote-box {
      text-align:center;
      margin-bottom:18px;
      font-style:italic;
      color: #444;
      background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.35));
      padding:14px 18px;
      border-radius:12px;
      box-shadow: var(--shadow);
    }
    .grid {
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:18px;
      align-items:start;
    }
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }

    /* Left column cards */
    .left-col { display:flex; flex-direction:column; gap:14px; }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
      transition: transform .22s ease, box-shadow .22s ease;
    }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.08) }

    .card h2 { margin:0 0 10px 0; color:var(--accent) }

    .muted { color:var(--muted); font-size:13px }

    /* gallery */
    .gallery { display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:12px; margin-top:10px; }
    .photo-card {
      border-radius:12px; overflow:hidden; background:linear-gradient(180deg,#fff,#fff);
      display:flex; flex-direction:column; justify-content:space-between; align-items:center; padding:8px;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .photo-card img { width:100%; height:140px; object-fit:cover; border-radius:8px; display:block; cursor:zoom-in; }
    .photo-card:hover{ transform: translateY(-6px); box-shadow: 0 14px 30px rgba(0,0,0,0.08) }
    .photo-card .caption { font-size:13px; color:#666; padding:8px 6px; text-align:center; min-height:38px; }

    .photo-actions { display:flex; gap:8px; margin-top:6px; }
    .btn { background:var(--accent); color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-size:13px; }
    .btn.ghost { background:transparent; color:var(--accent); border:1px solid rgba(214,51,108,0.12) }

    /* right column */
    .right-col { display:flex; flex-direction:column; gap:14px; }
    .sticky { position:sticky; top:26px; }

    /* love list */
    #progressBar {
      height:12px; background: linear-gradient(90deg,#ffe6ef,#ffd8e6); border-radius:8px; overflow:hidden; margin:10px 0;
    }
    #progressInner { height:100%; background: linear-gradient(90deg,#ff8bb0,#d6336c); width:0%; transition:width .6s ease; }

    .love-list ul{ margin:10px 0 0; padding:0; display:flex; flex-direction:column; gap:10px; }
    .love-item { display:flex; gap:8px; align-items:center; justify-content:space-between; padding:8px; border-radius:10px; background:rgba(255,255,255,0.8) }

    .item-left { display:flex; gap:8px; align-items:center; flex:1 }
    .item-left input[type="checkbox"]{ transform:scale(1.15) }
    .item-left .text { font-size:15px }

    .small { font-size:12px; color:#777 }

    /* lightbox */
    #lightbox { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.8); z-index:9999; align-items:center; justify-content:center; padding:20px; }
    #lightbox .inner { max-width:960px; width:100%; }
    #lightbox img { width:100%; height:auto; border-radius:12px; }
    #lightbox .caption { margin-top:8px; color:#fff; text-align:center }

    footer { margin-top:18px; text-align:center; color:var(--muted); font-size:13px }
  </style>
</head>
<body>
  <div class="site">
    <header class="top">
      <div class="brand">
        <div class="avatar">
          <img src="photo1.jpg" alt="头像（可替换）" onerror="this.src='https://via.placeholder.com/150?text=❤'">
        </div>
        <div class="title">
          <h1>铭津 ♥ 玉薪</h1>
          <p>我们的小窝 · 记录每一次笑与拥抱</p>
        </div>
      </div>
      <div class="controls">
        <div style="margin-bottom:8px;color:var(--muted);font-size:13px">当前：温柔模式</div>
        <button class="enter-btn" onclick="enterSite()">进入小窝</button>
      </div>
    </header>

    <div class="quote-box" id="dailyQuote">“你是我心中最柔软的光。”</div>

    <div class="grid">
      <div class="left-col">
        <div class="card">
          <h2>我们的纪念日</h2>
          <p class="muted">从 2025-03-15 开始，我们已经一起走过 <strong id="daysTogether">...</strong> 天。</p>
        </div>

        <div class="card">
          <h2>照片回忆</h2>
          <div style="display:flex;gap:10px;align-items:center;">
            <input id="photoUpload" type="file" accept="image/*" style="flex:1" />
            <button id="addFromUrl" class="btn ghost" title="添加远程图片">从 URL 添加</button>
          </div>

          <div class="gallery" id="photoGallery"></div>
          <p class="small muted">展示仓库图片 photo1.jpg 至 photo10.jpg（若存在）与你上传的本地照片；上传的照片储存在浏览器，不会自动推送到仓库。</p>
        </div>

        <div class="card">
          <h2>留言墙（预览）</h2>
          <p class="muted">点击“进入留言墙”写下不想忘记的话。</p>
          <a class="btn" href="words.html">进入留言墙</a>
        </div>
      </div>

      <aside class="right-col">
        <div class="card sticky">
          <h2>恋爱清单</h2>
          <div id="progressBar"><div id="progressInner"></div></div>
          <div style="display:flex;gap:8px">
            <input id="newItem" type="text" placeholder="输入新的恋爱目标..." />
            <button class="btn" onclick="addItem()">添加</button>
          </div>
          <div class="love-list">
            <ul id="loveList"></ul>
          </div>
        </div>

        <div class="card sticky">
          <h2>小提示</h2>
          <p class="small muted">试试点击相片进入灯箱，或为照片添加一句描述；清单项可编辑、标记完成并显示完成日期。</p>
        </div>
      </aside>
    </div>

    <footer>© 铭津 & 玉薪 · 小窝</footer>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" onclick="closeLightbox(event)">
    <div class="inner" onclick="event.stopPropagation()">
      <img id="lightboxImg" src="" alt="预览" />
      <div class="caption" id="lightboxCaption"></div>
      <div style="text-align:center;margin-top:10px">
        <button class="btn" onclick="copyCaption()" style="margin-right:8px">复制描述 / 情话</button>
        <button class="btn ghost" onclick="closeLightbox(event)">关闭</button>
      </div>
    </div>
  </div>

  <script>
    // 进入遮罩（覆盖 header 的 Enter 已经移除遮罩概念，这里保留函数用于兼容）
    function enterSite(){ window.scrollTo({top:0,behavior:'smooth'}); }

    // 纪念日
    const startDate = new Date("2025-03-15");
    function updateDays(){
      const today = new Date();
      const diff = Math.floor((today - startDate)/(1000*60*60*24));
      document.getElementById('daysTogether').textContent = diff;
    }
    updateDays();

    // 随机情话
    const quotes = [
      "你的笑容，是我最爱的风景。",
      "和你在一起的每一天，都是节日。",
      "爱你，是我最坚定的选择。",
      "世界很大，但我只想和你一起走。",
      "你是我心中最柔软的光。"
    ];
    document.getElementById('dailyQuote').textContent = `“${quotes[Math.floor(Math.random()*quotes.length)]}”`;

    /* ---------- 相册（preset photo1..photo10 + 上传） ---------- */
    const gallery = document.getElementById('photoGallery');
    let storedPhotos = JSON.parse(localStorage.getItem('photos')) || []; // [{src, caption}]
    const presetPhotos = [];
    for(let i=1;i<=10;i++){ presetPhotos.push({src:`photo${i}.jpg`, caption:''}); }

    // 一组自动情话/描述（按上传顺序循环）
    const photoQuotes = [
      "你的笑容，让春天提前到来。",
      "和你牵手，走过每一条街。",
      "愿时间温柔以待我们的小日子。",
      "你的名字，是我最温柔的念想。",
      "每天都想把世界的好给你看。"
    ];

    function renderPhotos(){
      gallery.innerHTML = '';
      // preset images first
      presetPhotos.forEach(p=>{
        const card = document.createElement('div'); card.className='photo-card';
        const img = document.createElement('img'); img.src=p.src; img.alt=p.src;
        img.onclick = ()=>openLightbox(p.src, p.caption || '');
        card.appendChild(img);
        const cap = document.createElement('div'); cap.className='caption'; cap.textContent = p.caption || '仓库图片';
        card.appendChild(cap);
        gallery.appendChild(card);
      });

      // uploaded photos
      storedPhotos.forEach((obj, idx)=>{
        const card = document.createElement('div'); card.className='photo-card';
        const img = document.createElement('img'); img.src = obj.src; img.alt = `uploaded-${idx}`;
        img.onclick = ()=>openLightbox(obj.src, obj.caption || photoQuotes[idx % photoQuotes.length]);
        card.appendChild(img);

        const caption = document.createElement('div'); caption.className='caption';
        caption.textContent = obj.caption || photoQuotes[idx % photoQuotes.length];
        caption.title = '点击编辑描述';
        caption.style.cursor = 'pointer';
        caption.onclick = ()=> editCaption(idx);
        card.appendChild(caption);

        const actions = document.createElement('div'); actions.className='photo-actions';
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='删除';
        del.onclick = ()=>{ if(confirm('确认删除这张上传的照片吗？')){ storedPhotos.splice(idx,1); savePhotos(); renderPhotos(); } };
        actions.appendChild(del);
        card.appendChild(actions);

        gallery.appendChild(card);
      });
    }

    function savePhotos(){ localStorage.setItem('photos', JSON.stringify(storedPhotos)); }

    function editCaption(idx){
      const text = prompt('编辑描述：', storedPhotos[idx].caption || photoQuotes[idx % photoQuotes.length]);
      if(text !== null){
        storedPhotos[idx].caption = text.trim();
        savePhotos(); renderPhotos();
      }
    }

    // 上传
    document.getElementById('photoUpload').addEventListener('change', e=>{
      const file = e.target.files && e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=> {
        storedPhotos.push({ src: reader.result, caption: '' });
        savePhotos(); renderPhotos();
      };
      reader.readAsDataURL(file);
      e.target.value = '';
    });

    // add from URL (quick)
    document.getElementById('addFromUrl').addEventListener('click', ()=>{
      const url = prompt('输入图片 URL：');
      if(url) {
        storedPhotos.push({src:url.trim(), caption:''});
        savePhotos(); renderPhotos();
      }
    });

    renderPhotos();

    /* ---------- lightbox ---------- */
    const lb = document.getElementById('lightbox');
    function openLightbox(src, caption){
      document.getElementById('lightboxImg').src = src;
      document.getElementById('lightboxCaption').textContent = caption || '';
      lb.style.display = 'flex';
    }
    function closeLightbox(e){
      if(!e || e.target === lb || e.target.classList.contains('ghost')) lb.style.display='none';
    }
    function copyCaption(){
      const text = document.getElementById('lightboxCaption').textContent || '';
      if(!text) return alert('没有描述可复制');
      navigator.clipboard.writeText(text).then(()=> alert('文本已复制到剪贴板'));
    }

    /* ---------- 恋爱清单（保留原始五项，支持完成、编辑、删除、进度） ---------- */
    const loveListEl = document.getElementById('loveList');
    const defaultItems = [
      {text:"一起去看海 🌊", done:false, date:null},
      {text:"一起做饭 🍳", done:false, date:null},
      {text:"一起拍一张傻傻的合照 📸", done:false, date:null},
      {text:"一起写一封情书 💌", done:false, date:null},
      {text:"一起看一场日落 🌅", done:false, date:null}
    ];
    const loaded = JSON.parse(localStorage.getItem('loveItems'));
    let loveItems = (Array.isArray(loaded) && loaded.length>0) ? loaded : defaultItems.slice();

    function saveLove(){ localStorage.setItem('loveItems', JSON.stringify(loveItems)); updateProgress(); }

    function updateProgress(){
      const done = loveItems.filter(i=>i.done).length;
      const total = Math.max(1,loveItems.length);
      const pct = Math.round((done/total)*100);
      document.getElementById('progressInner').style.width = pct + '%';
      document.getElementById('progressInner').title = `已完成 ${done}/${total} 项`;
    }

    function renderList(){
      loveListEl.innerHTML = '';
      loveItems.forEach((it, idx)=>{
        const li = document.createElement('li'); li.className='love-item';
        const left = document.createElement('div'); left.className='item-left';
        const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!it.done;
        cb.onchange = ()=>{
          it.done = cb.checked;
          it.date = it.done ? new Date().toLocaleDateString() : null;
          saveLove(); renderList();
        };
        left.appendChild(cb);
        const span = document.createElement('div'); span.className='text'; span.textContent = it.text;
        if(it.done) span.style.textDecoration = 'line-through';
        left.appendChild(span);

        li.appendChild(left);

        const right = document.createElement('div');
        right.style.display='flex'; right.style.gap='8px'; right.style.alignItems='center';

        if(it.date){
          const d = document.createElement('div'); d.className='small'; d.textContent = it.date; right.appendChild(d);
        }

        const edit = document.createElement('button'); edit.className='btn ghost'; edit.textContent='编辑';
        edit.onclick = ()=>{
          const v = prompt('编辑清单项：', it.text);
          if(v !== null){
            it.text = v.trim() || it.text;
            saveLove(); renderList();
          }
        };
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='删除';
        del.onclick = ()=>{
          if(confirm('确认删除这项吗？')){ loveItems.splice(idx,1); saveLove(); renderList(); }
        };

        right.appendChild(edit); right.appendChild(del);
        li.appendChild(right);
        loveListEl.appendChild(li);
      });
      updateProgress();
    }

    function addItem(){
      const input = document.getElementById('newItem');
      const v = input.value.trim();
      if(!v) return;
      loveItems.push({text:v,done:false,date:null});
      input.value=''; saveLove(); renderList();
    }

    renderList();
  </script>
</body>
</html>
