<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é“­æ´¥ â™¥ ç‰è–ªçš„å°çª</title>

  <!-- å­—ä½“ï¼ˆå¯æ”¹ä¸ºæœ¬åœ°å­—ä½“æˆ–æ›¿æ¢è·¯å¾„ï¼‰ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink-1: #ffe8ec;
      --pink-2: #ffc9d6;
      --accent: #d6336c;
      --muted: #6b6b6b;
      --card-bg: rgba(255,255,255,0.9);
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 8px 20px rgba(214,51,108,0.08);
      --radius: 14px;
      --max-width: 980px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Noto Sans SC', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,var(--pink-1),var(--pink-2));
      -webkit-font-smoothing:antialiased;
      color:#333;
      display:flex;
      justify-content:center;
      padding:28px;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
      margin:0 auto;
    }

    header.top {
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:18px;
      padding:18px;
      border-radius:20px;
      background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.12));
      box-shadow: var(--shadow);
      backdrop-filter: blur(6px);
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
      flex:1;
    }
    .avatar {
      width:74px; height:74px; border-radius:50%;
      overflow:hidden; flex-shrink:0;
      border: 3px solid rgba(255,255,255,0.8);
      box-shadow: 0 6px 18px rgba(214,51,108,0.12);
    }
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .title {
      display:flex; flex-direction:column;
    }
    .title h1{margin:0;font-family:'Great Vibes', cursive; font-size:34px; color:var(--accent); line-height:1}
    .title p{margin:4px 0 0;font-size:13px;color:var(--muted)}

    .controls { text-align:right; min-width:160px; }
    .enter-btn { background:var(--accent); color:#fff; border:none; padding:8px 14px; border-radius:10px; cursor:pointer; font-weight:600; box-shadow: 0 6px 16px rgba(214,51,108,0.12); }
    .enter-btn.secondary { background:transparent; color:var(--accent); border:1px solid rgba(214,51,108,0.12); }

    .quote-box {
      text-align:center;
      margin-bottom:18px;
      font-style:italic;
      color: #444;
      background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.35));
      padding:14px 18px;
      border-radius:12px;
      box-shadow: var(--shadow);
    }
    .grid {
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:18px;
      align-items:start;
    }
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }

    /* Left column cards */
    .left-col { display:flex; flex-direction:column; gap:14px; }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
      transition: transform .22s ease, box-shadow .22s ease;
    }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.08) }

    .card h2 { margin:0 0 10px 0; color:var(--accent) }

    .muted { color:var(--muted); font-size:13px }

    /* gallery */
    .gallery { display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:12px; margin-top:10px; }
    .photo-card {
      border-radius:12px; overflow:hidden; background:linear-gradient(180deg,#fff,#fff);
      display:flex; flex-direction:column; justify-content:space-between; align-items:center; padding:8px;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .photo-card img { width:100%; height:140px; object-fit:cover; border-radius:8px; display:block; cursor:zoom-in; }
    .photo-card:hover{ transform: translateY(-6px); box-shadow: 0 14px 30px rgba(0,0,0,0.08) }
    .photo-card .caption { font-size:13px; color:#666; padding:8px 6px; text-align:center; min-height:38px; }

    .photo-actions { display:flex; gap:8px; margin-top:6px; }
    .btn { background:var(--accent); color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-size:13px; }
    .btn.ghost { background:transparent; color:var(--accent); border:1px solid rgba(214,51,108,0.12) }

    /* right column */
    .right-col { display:flex; flex-direction:column; gap:14px; }
    .sticky { position:sticky; top:26px; }

    /* love list */
    #progressBar {
      height:12px; background: linear-gradient(90deg,#ffe6ef,#ffd8e6); border-radius:8px; overflow:hidden; margin:10px 0;
    }
    #progressInner { height:100%; background: linear-gradient(90deg,#ff8bb0,#d6336c); width:0%; transition:width .6s ease; }

    .love-list ul{ margin:10px 0 0; padding:0; display:flex; flex-direction:column; gap:10px; }
    .love-item { display:flex; gap:8px; align-items:center; justify-content:space-between; padding:8px; border-radius:10px; background:rgba(255,255,255,0.8) }

    .item-left { display:flex; gap:8px; align-items:center; flex:1 }
    .item-left input[type="checkbox"]{ transform:scale(1.15) }
    .item-left .text { font-size:15px }

    .small { font-size:12px; color:#777 }

    /* lightbox */
    #lightbox { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.8); z-index:9999; align-items:center; justify-content:center; padding:20px; }
    #lightbox .inner { max-width:960px; width:100%; }
    #lightbox img { width:100%; height:auto; border-radius:12px; }
    #lightbox .caption { margin-top:8px; color:#fff; text-align:center }

    footer { margin-top:18px; text-align:center; color:var(--muted); font-size:13px }
  </style>
</head>
<body>
  <div class="site">
    <header class="top">
      <div class="brand">
        <div class="avatar">
          <img src="photo1.jpg" alt="å¤´åƒï¼ˆå¯æ›¿æ¢ï¼‰" onerror="this.src='https://via.placeholder.com/150?text=â¤'">
        </div>
        <div class="title">
          <h1>é“­æ´¥ â™¥ ç‰è–ª</h1>
          <p>æˆ‘ä»¬çš„å°çª Â· è®°å½•æ¯ä¸€æ¬¡ç¬‘ä¸æ‹¥æŠ±</p>
        </div>
      </div>
      <div class="controls">
        <div style="margin-bottom:8px;color:var(--muted);font-size:13px">å½“å‰ï¼šæ¸©æŸ”æ¨¡å¼</div>
        <button class="enter-btn" onclick="enterSite()">è¿›å…¥å°çª</button>
      </div>
    </header>

    <div class="quote-box" id="dailyQuote">â€œä½ æ˜¯æˆ‘å¿ƒä¸­æœ€æŸ”è½¯çš„å…‰ã€‚â€</div>

    <div class="grid">
      <div class="left-col">
        <div class="card">
          <h2>æˆ‘ä»¬çš„çºªå¿µæ—¥</h2>
          <p class="muted">ä» 2025-03-15 å¼€å§‹ï¼Œæˆ‘ä»¬å·²ç»ä¸€èµ·èµ°è¿‡ <strong id="daysTogether">...</strong> å¤©ã€‚</p>
        </div>

        <div class="card">
          <h2>ç…§ç‰‡å›å¿†</h2>
          <div style="display:flex;gap:10px;align-items:center;">
            <input id="photoUpload" type="file" accept="image/*" style="flex:1" />
            <button id="addFromUrl" class="btn ghost" title="æ·»åŠ è¿œç¨‹å›¾ç‰‡">ä» URL æ·»åŠ </button>
          </div>

          <div class="gallery" id="photoGallery"></div>
          <p class="small muted">å±•ç¤ºä»“åº“å›¾ç‰‡ photo1.jpg è‡³ photo10.jpgï¼ˆè‹¥å­˜åœ¨ï¼‰ä¸ä½ ä¸Šä¼ çš„æœ¬åœ°ç…§ç‰‡ï¼›ä¸Šä¼ çš„ç…§ç‰‡å‚¨å­˜åœ¨æµè§ˆå™¨ï¼Œä¸ä¼šè‡ªåŠ¨æ¨é€åˆ°ä»“åº“ã€‚</p>
        </div>

        <div class="card">
          <h2>ç•™è¨€å¢™ï¼ˆé¢„è§ˆï¼‰</h2>
          <p class="muted">ç‚¹å‡»â€œè¿›å…¥ç•™è¨€å¢™â€å†™ä¸‹ä¸æƒ³å¿˜è®°çš„è¯ã€‚</p>
          <a class="btn" href="words.html">è¿›å…¥ç•™è¨€å¢™</a>
        </div>
      </div>

      <aside class="right-col">
        <div class="card sticky">
          <h2>æ‹çˆ±æ¸…å•</h2>
          <div id="progressBar"><div id="progressInner"></div></div>
          <div style="display:flex;gap:8px">
            <input id="newItem" type="text" placeholder="è¾“å…¥æ–°çš„æ‹çˆ±ç›®æ ‡..." />
            <button class="btn" onclick="addItem()">æ·»åŠ </button>
          </div>
          <div class="love-list">
            <ul id="loveList"></ul>
          </div>
        </div>

        <div class="card sticky">
          <h2>å°æç¤º</h2>
          <p class="small muted">è¯•è¯•ç‚¹å‡»ç›¸ç‰‡è¿›å…¥ç¯ç®±ï¼Œæˆ–ä¸ºç…§ç‰‡æ·»åŠ ä¸€å¥æè¿°ï¼›æ¸…å•é¡¹å¯ç¼–è¾‘ã€æ ‡è®°å®Œæˆå¹¶æ˜¾ç¤ºå®Œæˆæ—¥æœŸã€‚</p>
        </div>
      </aside>
    </div>

    <footer>Â© é“­æ´¥ & ç‰è–ª Â· å°çª</footer>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" onclick="closeLightbox(event)">
    <div class="inner" onclick="event.stopPropagation()">
      <img id="lightboxImg" src="" alt="é¢„è§ˆ" />
      <div class="caption" id="lightboxCaption"></div>
      <div style="text-align:center;margin-top:10px">
        <button class="btn" onclick="copyCaption()" style="margin-right:8px">å¤åˆ¶æè¿° / æƒ…è¯</button>
        <button class="btn ghost" onclick="closeLightbox(event)">å…³é—­</button>
      </div>
    </div>
  </div>

  <script>
    // è¿›å…¥é®ç½©ï¼ˆè¦†ç›– header çš„ Enter å·²ç»ç§»é™¤é®ç½©æ¦‚å¿µï¼Œè¿™é‡Œä¿ç•™å‡½æ•°ç”¨äºå…¼å®¹ï¼‰
    function enterSite(){ window.scrollTo({top:0,behavior:'smooth'}); }

    // çºªå¿µæ—¥
    const startDate = new Date("2025-03-15");
    function updateDays(){
      const today = new Date();
      const diff = Math.floor((today - startDate)/(1000*60*60*24));
      document.getElementById('daysTogether').textContent = diff;
    }
    updateDays();

    // éšæœºæƒ…è¯
    const quotes = [
      "ä½ çš„ç¬‘å®¹ï¼Œæ˜¯æˆ‘æœ€çˆ±çš„é£æ™¯ã€‚",
      "å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€å¤©ï¼Œéƒ½æ˜¯èŠ‚æ—¥ã€‚",
      "çˆ±ä½ ï¼Œæ˜¯æˆ‘æœ€åšå®šçš„é€‰æ‹©ã€‚",
      "ä¸–ç•Œå¾ˆå¤§ï¼Œä½†æˆ‘åªæƒ³å’Œä½ ä¸€èµ·èµ°ã€‚",
      "ä½ æ˜¯æˆ‘å¿ƒä¸­æœ€æŸ”è½¯çš„å…‰ã€‚"
    ];
    document.getElementById('dailyQuote').textContent = `â€œ${quotes[Math.floor(Math.random()*quotes.length)]}â€`;

    /* ---------- ç›¸å†Œï¼ˆpreset photo1..photo10 + ä¸Šä¼ ï¼‰ ---------- */
    const gallery = document.getElementById('photoGallery');
    let storedPhotos = JSON.parse(localStorage.getItem('photos')) || []; // [{src, caption}]
    const presetPhotos = [];
    for(let i=1;i<=10;i++){ presetPhotos.push({src:`photo${i}.jpg`, caption:''}); }

    // ä¸€ç»„è‡ªåŠ¨æƒ…è¯/æè¿°ï¼ˆæŒ‰ä¸Šä¼ é¡ºåºå¾ªç¯ï¼‰
    const photoQuotes = [
      "ä½ çš„ç¬‘å®¹ï¼Œè®©æ˜¥å¤©æå‰åˆ°æ¥ã€‚",
      "å’Œä½ ç‰µæ‰‹ï¼Œèµ°è¿‡æ¯ä¸€æ¡è¡—ã€‚",
      "æ„¿æ—¶é—´æ¸©æŸ”ä»¥å¾…æˆ‘ä»¬çš„å°æ—¥å­ã€‚",
      "ä½ çš„åå­—ï¼Œæ˜¯æˆ‘æœ€æ¸©æŸ”çš„å¿µæƒ³ã€‚",
      "æ¯å¤©éƒ½æƒ³æŠŠä¸–ç•Œçš„å¥½ç»™ä½ çœ‹ã€‚"
    ];

    function renderPhotos(){
      gallery.innerHTML = '';
      // preset images first
      presetPhotos.forEach(p=>{
        const card = document.createElement('div'); card.className='photo-card';
        const img = document.createElement('img'); img.src=p.src; img.alt=p.src;
        img.onclick = ()=>openLightbox(p.src, p.caption || '');
        card.appendChild(img);
        const cap = document.createElement('div'); cap.className='caption'; cap.textContent = p.caption || 'ä»“åº“å›¾ç‰‡';
        card.appendChild(cap);
        gallery.appendChild(card);
      });

      // uploaded photos
      storedPhotos.forEach((obj, idx)=>{
        const card = document.createElement('div'); card.className='photo-card';
        const img = document.createElement('img'); img.src = obj.src; img.alt = `uploaded-${idx}`;
        img.onclick = ()=>openLightbox(obj.src, obj.caption || photoQuotes[idx % photoQuotes.length]);
        card.appendChild(img);

        const caption = document.createElement('div'); caption.className='caption';
        caption.textContent = obj.caption || photoQuotes[idx % photoQuotes.length];
        caption.title = 'ç‚¹å‡»ç¼–è¾‘æè¿°';
        caption.style.cursor = 'pointer';
        caption.onclick = ()=> editCaption(idx);
        card.appendChild(caption);

        const actions = document.createElement('div'); actions.className='photo-actions';
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='åˆ é™¤';
        del.onclick = ()=>{ if(confirm('ç¡®è®¤åˆ é™¤è¿™å¼ ä¸Šä¼ çš„ç…§ç‰‡å—ï¼Ÿ')){ storedPhotos.splice(idx,1); savePhotos(); renderPhotos(); } };
        actions.appendChild(del);
        card.appendChild(actions);

        gallery.appendChild(card);
      });
    }

    function savePhotos(){ localStorage.setItem('photos', JSON.stringify(storedPhotos)); }

    function editCaption(idx){
      const text = prompt('ç¼–è¾‘æè¿°ï¼š', storedPhotos[idx].caption || photoQuotes[idx % photoQuotes.length]);
      if(text !== null){
        storedPhotos[idx].caption = text.trim();
        savePhotos(); renderPhotos();
      }
    }

    // ä¸Šä¼ 
    document.getElementById('photoUpload').addEventListener('change', e=>{
      const file = e.target.files && e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=> {
        storedPhotos.push({ src: reader.result, caption: '' });
        savePhotos(); renderPhotos();
      };
      reader.readAsDataURL(file);
      e.target.value = '';
    });

    // add from URL (quick)
    document.getElementById('addFromUrl').addEventListener('click', ()=>{
      const url = prompt('è¾“å…¥å›¾ç‰‡ URLï¼š');
      if(url) {
        storedPhotos.push({src:url.trim(), caption:''});
        savePhotos(); renderPhotos();
      }
    });

    renderPhotos();

    /* ---------- lightbox ---------- */
    const lb = document.getElementById('lightbox');
    function openLightbox(src, caption){
      document.getElementById('lightboxImg').src = src;
      document.getElementById('lightboxCaption').textContent = caption || '';
      lb.style.display = 'flex';
    }
    function closeLightbox(e){
      if(!e || e.target === lb || e.target.classList.contains('ghost')) lb.style.display='none';
    }
    function copyCaption(){
      const text = document.getElementById('lightboxCaption').textContent || '';
      if(!text) return alert('æ²¡æœ‰æè¿°å¯å¤åˆ¶');
      navigator.clipboard.writeText(text).then(()=> alert('æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'));
    }

    /* ---------- æ‹çˆ±æ¸…å•ï¼ˆä¿ç•™åŸå§‹äº”é¡¹ï¼Œæ”¯æŒå®Œæˆã€ç¼–è¾‘ã€åˆ é™¤ã€è¿›åº¦ï¼‰ ---------- */
    const loveListEl = document.getElementById('loveList');
    const defaultItems = [
      {text:"ä¸€èµ·å»çœ‹æµ· ğŸŒŠ", done:false, date:null},
      {text:"ä¸€èµ·åšé¥­ ğŸ³", done:false, date:null},
      {text:"ä¸€èµ·æ‹ä¸€å¼ å‚»å‚»çš„åˆç…§ ğŸ“¸", done:false, date:null},
      {text:"ä¸€èµ·å†™ä¸€å°æƒ…ä¹¦ ğŸ’Œ", done:false, date:null},
      {text:"ä¸€èµ·çœ‹ä¸€åœºæ—¥è½ ğŸŒ…", done:false, date:null}
    ];
    const loaded = JSON.parse(localStorage.getItem('loveItems'));
    let loveItems = (Array.isArray(loaded) && loaded.length>0) ? loaded : defaultItems.slice();

    function saveLove(){ localStorage.setItem('loveItems', JSON.stringify(loveItems)); updateProgress(); }

    function updateProgress(){
      const done = loveItems.filter(i=>i.done).length;
      const total = Math.max(1,loveItems.length);
      const pct = Math.round((done/total)*100);
      document.getElementById('progressInner').style.width = pct + '%';
      document.getElementById('progressInner').title = `å·²å®Œæˆ ${done}/${total} é¡¹`;
    }

    function renderList(){
      loveListEl.innerHTML = '';
      loveItems.forEach((it, idx)=>{
        const li = document.createElement('li'); li.className='love-item';
        const left = document.createElement('div'); left.className='item-left';
        const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!it.done;
        cb.onchange = ()=>{
          it.done = cb.checked;
          it.date = it.done ? new Date().toLocaleDateString() : null;
          saveLove(); renderList();
        };
        left.appendChild(cb);
        const span = document.createElement('div'); span.className='text'; span.textContent = it.text;
        if(it.done) span.style.textDecoration = 'line-through';
        left.appendChild(span);

        li.appendChild(left);

        const right = document.createElement('div');
        right.style.display='flex'; right.style.gap='8px'; right.style.alignItems='center';

        if(it.date){
          const d = document.createElement('div'); d.className='small'; d.textContent = it.date; right.appendChild(d);
        }

        const edit = document.createElement('button'); edit.className='btn ghost'; edit.textContent='ç¼–è¾‘';
        edit.onclick = ()=>{
          const v = prompt('ç¼–è¾‘æ¸…å•é¡¹ï¼š', it.text);
          if(v !== null){
            it.text = v.trim() || it.text;
            saveLove(); renderList();
          }
        };
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='åˆ é™¤';
        del.onclick = ()=>{
          if(confirm('ç¡®è®¤åˆ é™¤è¿™é¡¹å—ï¼Ÿ')){ loveItems.splice(idx,1); saveLove(); renderList(); }
        };

        right.appendChild(edit); right.appendChild(del);
        li.appendChild(right);
        loveListEl.appendChild(li);
      });
      updateProgress();
    }

    function addItem(){
      const input = document.getElementById('newItem');
      const v = input.value.trim();
      if(!v) return;
      loveItems.push({text:v,done:false,date:null});
      input.value=''; saveLove(); renderList();
    }

    renderList();
  </script>
</body>
</html>
